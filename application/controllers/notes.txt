1. RWERITE(ENTERE)/DELETE
https://www.mysqltutorial.org/create-the-first-trigger-in-mysql.aspx

{
  "description": "50 Updates",
  "date": "5th MAR 2020",
  "versionCode": "xxxxxx-xxx-xxxx-xxxx",
  "updates": [
    {
      "fileUrl": "http://he.xxxxxxx.json",
      "mode": 1,
      "localFilePath": "/local/system/xxx.json"
    },
    {
      "mode": 0,
      "localFilePath": "/local/system/xxx.json"
    },
    {
      "fileUrl": "http://he.xxxxxxx.json",
      "mode": 1,
      "localFilePath": "/local/system/xxx.json"
    }
  ]
}



DELIMITER $$
CREATE TRIGGER trigger_user_update AFTER UPDATE ON mdl_user
FOR EACH ROW
BEGIN
   CALL users_he_updateprocedure(OLD.id,OLD.username,'updated',OLD.deleted);
END;
$$


DELIMITER $$
CREATE TRIGGER trigger_user_insert AFTER INSERT ON mdl_user
FOR EACH ROW
BEGIN
   CALL users_he_updateprocedure(NEW.id,NEW.username,'inserted',NEW.deleted);
END;
$$

DELIMITER $$
CREATE TRIGGER trigger_user_delete AFTER DELETE ON mdl_user
FOR EACH ROW
BEGIN
   CALL users_he_updateprocedure(OLD.id,OLD.username,'deleted',OLD.deleted);
END;
$$



DELIMITER $$

CREATE PROCEDURE users_he_updateprocedure(
    IN  _userid INT,IN _username VARCHAR(255),IN p_type VARCHAR(255),IN delete_n INT)
BEGIN
    IF delete_n>0 THEN
       p_type='deleted';
    END IF;
    IF (SELECT count(*) FROM mdl_user_audit WHERE user_id = _userid AND name =_username)>0 THEN
        BEGIN
        UPDATE mdl_user_audit SET changedat=NOW(),action =p_type WHERE user_id = _userid AND name =_username;
        END;
    ELSE
        BEGIN
        INSERT INTO mdl_user_audit SET action =p_type,user_id = _userid,name =_username,changedat = NOW();
        END;
    END IF;
END$$
    